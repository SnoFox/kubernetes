####################################################
# MANUAL WORK REQUIRED FOR BOOTSTRAPPING A CLUSTER #
####################################################
# These credentials created and applied manually outside of CI/CD, because 1Password
# is the operator which creates Secrets for other services inside the cluster.
# Fetch secrets from 1Password's WebUI: https://my.1password.com/developer-tools/active/servers
# place them in the below core.v1/Secrets, then lose your local copy in the trash.
connect:
  replicas: 1
  credentialsName: op-credentials
  credentialsKey: 1password-credentials.json
# Looks like this:
# ---
# apiVersion: v1
# kind: Secret
# metadata:
#   labels:
#   name: op-credentials
#   namespace: onepassword
# type: Opaque
# data:
#  1password-credentials.json: <base64 encoded json>
#
# see for example: ❯ kubectl -n onepassword get secret/op-credentials -oyaml|yq '.data["1password-credentials.json"]'|base64 -d|base64 -d|jq 'keys'
# ["deviceUuid", "encCredentials", "uniqueKey", "verifier", "version"]
  pdb:
    enabled: true
    minAvailable: 1
  tolerations:
    - key: CriticalAddonsOnly
      operator: Exists
      effect: NoSchedule


operator:
  create: true
  autoRestart: true
  token:
    name: onepassword-token
    key: token
# Looks like this:
# ❯ kubectl -n onepassword get secret/onepassword-token -oyaml
# ---
# apiVersion: v1
# kind: Secret
# metadata:
#   name: onepassword-token
#   namespace: onepassword
# type: Opaque
# data:
#   token: <token>
